var XSSHelpers=(buildTagRegex=function(e){return new RegExp("(<\\/?\\s*\\b"+e+"\\b(.*?)\\s*>)","g")},cleanTag=function(e){return e.replace(/<\s*\/?|>/g,"").trim()},containsTag=function(e,t){return null!==buildTagRegex(cleanTag(t)).exec(e)},containsTags=function(e,t,n){null==n&&(n=!1);for(var a=0;a<t.length;a++){var o=containsTag(e,t[a]);if(n){if(!o)return!1}else if(o)return!0}return!1},stripAllTags=function(e){return e.replace(buildTagRegex(""),"")},stripTag=function(e,t){return e.replace(buildTagRegex(cleanTag(t)),"")},stripTags=function(e,t){for(var n=0;n<t.length;n++)e=stripTag(e,t[n]);return e},{buildTagRegex:buildTagRegex,containsTag:containsTag,containsTags:containsTags,stripAllTags:stripAllTags,stripTag:stripTag,stripTags:stripTags});"undefined"!=typeof module&&(module.exports=XSSHelpers);var LEAFNexusAPI=function(){var t="./api/?a=",n=NexusEmployeeAPI(t),e=NexusGroupsAPI(this.baseURL);return{getBaseURL:function(){return t},setBaseURL:function(e){t=e,n.setBaseAPIURL(t)},setCSRFToken:function(e){csrfToken=e,n.setCSRFToken(csrfToken)},Employee:n,Groups:e}},NexusEmployeeAPI=function(e){var o=e,i=e+"employee",u="";return{getAPIURL:function(){return i},getBaseAPIURL:function(){return o},getByEmail:function(e,t,n){var a=i+"/search&q="+e+"&noLimit=0";$.ajax({method:"GET",url:a,dataType:"json",cache:!1}).done(t).fail(n)},getByEmailNational:function(e,t,n){var a=o+"national/employee/search&q="+e+"&noLimit=0";$.ajax({method:"GET",url:a,dataType:"json",async:!1,cache:!1}).done(t).fail(n)},importFromNational:function(e,t,n,a){var o=i+"/import/_"+e,r={};r.CSRFToken=u,$.ajax({method:"POST",url:o,data:r,dataType:"json",async:t}).done(n).fail(a)},setBaseAPIURL:function(e){i=(o=e)+"employee"},setCSRFToken:function(e){u=e}}},NexusGroupsAPI=function(e){var t=e,n=function(){return t};return{getAPIURL:n,getBaseAPIURL:n,listGroupEmployeesDetailed:function(e,t,n,a,o){var r=this.apiURL+"/"+e+"/employees/detailed";-1!==t&&(r+="&limit="+t),0<n&&(r+="&offset="+n),0<searchText.length&&(r+="&search="+searchText),$.ajax({method:"GET",url:r,dataType:"json",cache:!1}).done(function(e){a(e)}).fail(function(e){o(e)})}}},LEAFRequestPortalAPI=function(){var t="./api/?a=",n=PortalFormsAPI(t),a=PortalFormEditorAPI(t),o=PortalImportAPI(t),r=PortalSignaturesAPI(t),i=PortalSystemAPI(t),u=PortalWorkflowAPI(t);return{getBaseURL:function(){return t},setBaseURL:function(e){t=e,n.setBaseAPIURL(t),a.setBaseAPIURL(t),o.setBaseAPIURL(t),r.setBaseAPIURL(t),i.setBaseAPIURL(t),u.setBaseAPIURL(t)},setCSRFToken:function(e){e,n.setCSRFToken(e),a.setCSRFToken(e),o.setCSRFToken(e),r.setCSRFToken(e),i.setCSRFToken(e),u.setCSRFToken(e)},Forms:n,FormEditor:a,Import:o,Signature:r,System:i,Workflow:u}},PortalFormsAPI=function(e){var t=e,i=e+"form",u="",s=function(e,t,n,a){null!=t.title&&delete t.title;var o=i+"/"+e;t.CSRFToken=u,$.ajax({method:"POST",url:o,data:t,dataType:"json"}).done(n).fail(a)};return{getAPIURL:function(){return i},getAllForms:function(e,t){var n=i+"/categories";$.ajax({method:"GET",url:n,dataType:"json",cache:!1}).done(e).fail(t)},getBaseAPIURL:function(){return t},getIndicatorsForForm:function(e,t,n){var a=i+"/category&id="+e;$.ajax({method:"GET",url:a,dataType:"json",cache:!1}).done(t).fail(n)},modifyRequest:s,newRequest:function(e,n,a,o){var t=i+"/new",r={};r.CSRFToken=u,r["num"+e]=1,r.title=n.title,$.ajax({method:"POST",url:t,data:r,dataType:"json"}).done(function(t){s(t,n,function(e){0<e?a(t):o(!1)},o)}).fail(o)},setBaseAPIURL:function(e){i=(t=e)+"form"},setCSRFToken:function(e){u=e},setInitiator:function(e,t,n,a){var o=i+"/"+e+"/initiator",r={};r.CSRFToken=u,r.initiator=t,$.ajax({method:"POST",url:o,data:r,dataType:"json"}).done(n).fail(a)},query:function(e,t,n){var a=i+"/query/&q="+JSON.stringify(e);$.ajax({method:"GET",url:a,dataType:"json",cache:!1}).done(function(e){t(e)}).fail(function(e){n(e)})}}},PortalFormEditorAPI=function(e){var t=e,i=e+"formEditor",r="";return{getAPIURL:function(){return i},getBaseAPIURL:function(){return t},getIndicator:function(e,t,n,a,o){var r=i+"/indicator/"+e+(null!=o&&1==o?"&parseTemplate":"")+(null!=a&&null!=a?"&recordID="+a:"");$.ajax({method:"GET",url:r,dataType:"json",cache:!1}).done(function(e){t(e)}).fail(function(e){n(e)})},getIndicatorEditor:function(e,t,n,a){var o="ajaxIndex.php?a=getindicator&recordID="+t+"&indicatorID="+e+"&series=1";$.ajax({method:"GET",url:o,dataType:"html",cache:!1}).done(n).fail(a)},getIndicatorPrivileges:function(e,t,n){var a=i+"/indicator/"+e+"/privileges";$.ajax({method:"GET",url:a,dataType:"json",cache:!1}).done(function(e){t(e)}).fail(function(e){n(e)})},setBaseAPIURL:function(e){i=(t=e)+"formEditor"},setCSRFToken:function(e){r=e},removeIndicatorPrivilege:function(e,t,n,a){var o=i+"/indicator/"+e+"/privileges/remove";$.ajax({method:"POST",url:o,dataType:"text",data:{groupID:t,CSRFToken:r}}).done(function(e){n(e)}).fail(function(e){a(e)})},setIndicatorPrivileges:function(e,t,n,a){$.ajax({method:"POST",url:i+"/indicator/"+e+"/privileges",dataType:"text",data:{groupIDs:t,CSRFToken:r}}).done(function(e){n(e)}).fail(function(e){a(e)})}}},PortalImportAPI=function(e){var t=e,r=e+"import";return{getAPIURL:function(){return r},getBaseAPIURL:function(){return t},parseXLS:function(e,t,n,a){var o=r+"/xls&importFile="+e+"&hasHeaders="+(!0===t?1:0);$.ajax({method:"GET",url:o,dataType:"json",cache:!1}).done(n).fail(a)},setBaseAPIURL:function(e){r=(t=e)+"import"},setCSRFToken:function(e){e}}},PortalSignaturesAPI=function(e){var t=e,r=e+"signature",i="";return{getAPIURL:function(){return r},getBaseAPIURL:function(){return t},setBaseAPIURL:function(e){r=(t=e)+"signature"},setCSRFToken:function(e){i=e},create:function(e,t,n,a,o){$.ajax({method:"POST",url:r+"/create",dataType:"text",data:{signature:e,recordID:t,message:n,CSRFToken:i}}).done(function(e){a(e)}).fail(function(e){o(e)})}}},PortalSystemAPI=function(e){var t=e,n=e+"system";return{getAPIURL:function(){return n},getBaseAPIURL:function(){return t},getFileList:function(e,t){$.ajax({method:"GET",url:n+"/files",dataType:"json",cache:!1}).done(e).fail(t)},setBaseAPIURL:function(e){n=(t=e)+"system"},setCSRFToken:function(e){e}}},PortalWorkflowAPI=function(e){var t=e,r=e+"workflow",i="";return{getAPIURL:function(){return r},getBaseAPIURL:function(){return t},setBaseAPIURL:function(e){r=(t=e)+"workflow"},setCSRFToken:function(e){i=e},setStepSignatureRequirement:function(e,t,n,a,o){$.ajax({method:"POST",url:r+"/"+e+"/step/"+t+"/requiresig",dataType:"text",data:{requiresSig:n,CSRFToken:i}}).done(function(e){a(e)}).fail(function(e){o(e)})}}};