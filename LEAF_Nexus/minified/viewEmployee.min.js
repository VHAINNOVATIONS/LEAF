function nationalEmployeeSelector(t){this.apiPath="./api/?a=",this.rootPath="",this.useJSONP=0,this.selection="",this.containerID=t,this.prefixID="empSel"+Math.floor(1e3*Math.random())+"_",this.timer=0,this.q="",this.qDomain="",this.isBusy=1,this.backgroundImage="images/indicator.gif",this.intervalID=null,this.selectHandler=null,this.resultHandler=null,this.selectLink=null,this.selectionData=new Object,this.optionNoLimit=0,this.currRequest=null,this.outputStyle="standard",this.emailHref=!1,this.numResults=0}function orgchartForm(t){this.containerID=t,this.prefixID="orgForm"+Math.floor(1e3*Math.random())+"_",this.dialog=null,this.updateEvents=new Object,this.currUID=null}function dialogController(t,e,i,o,s){this.containerID=t,this.contentID=e,this.indicatorID=i,this.btnSaveID=o,this.btnCancelID=s,this.dialogControllerXhrEvent=null,this.prefixID="dialog"+Math.floor(1e3*Math.random())+"_",this.validators=new Object,this.validatorErrors=new Object,this.validatorOks=new Object,this.invalid=0,$("#"+this.containerID).dialog({autoOpen:!1,modal:!0,height:"auto",width:"auto"}),this.clearDialog();var r=this;$("#"+this.btnCancelID).on("click",function(){r.hide()})}function groupSelector(t){this.basePath="",this.apiPath="./api/?a=",this.selection="",this.containerID=t,this.prefixID="grpSel"+Math.floor(1e3*Math.random())+"_",this.timer=0,this.q="",this.isBusy=1,this.backgroundImage="images/indicator.gif",this.intervalID=null,this.tag="",this.selectHandler=null,this.resultHandler=null,this.selectLink=null,this.selectionData=new Object,this.inputID="#"+this.prefixID+"input",this.optionNoLimit=0,this.currRequest=null,this.jsonResponse=null,this.numResults=0}function positionSelector(t){this.apiPath="./api/?a=",this.rootPath="",this.selection="",this.containerID=t,this.prefixID="posSel"+Math.floor(1e3*Math.random())+"_",this.timer=0,this.q="",this.isBusy=1,this.backgroundImage="images/indicator.gif",this.intervalID=null,this.selectHandler=null,this.resultHandler=null,this.selectLink=null,this.selectionData=new Object,this.optionEmployeeSearch=0,this.optionNoLimit=0,this.currRequest=null,this.numResults=0}nationalEmployeeSelector.prototype.initialize=function(){var e=this,t="",i=["aac.dva.va.gov","cem.va.gov","dva.va.gov","r01.med.va.gov","r02.med.va.gov","r03.med.va.gov","r04.med.va.gov","vba.va.gov","vha.med.va.gov","VHA01","VHA02","VHA03","VHA04","VHA05","VHA06","VHA07","VHA08","VHA09","VHA10","VHA11","VHA12","VHA15","VHA16","VHA17","VHA18","VHA19","VHA20","VHA21","VHA22","VHA23"];for(var o in i)t+='<option value="'+i[o]+'">'+i[o]+"</option>";$("#"+this.containerID).html('<div id="'+this.prefixID+'border" class="employeeSelectorBorder">\t\t\t<select id="'+this.prefixID+'domain" class="employeeSelectorInput" style="width: 100px; display: none">\t\t\t<option value="">All Domains</option>\t\t\t'+t+'\t\t\t</select>\t\t\t<img id="'+this.prefixID+'icon" src="'+e.rootPath+'../libs/dynicons/?img=search.svg&w=16" class="employeeSelectorIcon" alt="search" />\t\t\t<img id="'+this.prefixID+'iconBusy" src="'+e.rootPath+'images/indicator.gif" style="display: none" class="employeeSelectorIcon" alt="busy" />\t\t\t<input id="'+this.prefixID+'input" type="search" class="employeeSelectorInput" style="width: calc(90% - 100px)" aria-label="search input"></input></div>\t\t\t<div id="'+this.prefixID+'result" aria-label="search results"></div>'),$("#"+this.prefixID+"input").on("keydown",function(t){e.showBusy(),e.timer=0,13==t.keyCode&&e.search()}),this.showNotBusy(),this.intervalID=setInterval(function(){e.search()},200)},nationalEmployeeSelector.prototype.showNotBusy=function(){1==this.isBusy&&($("#"+this.prefixID+"icon").css("display","inline"),$("#"+this.prefixID+"iconBusy").css("display","none"),this.isBusy=0)},nationalEmployeeSelector.prototype.showBusy=function(){$("#"+this.prefixID+"icon").css("display","none"),$("#"+this.prefixID+"iconBusy").css("display","inline"),this.isBusy=1},nationalEmployeeSelector.prototype.select=function(t){this.selection=t,$.each($("#"+this.containerID+" .employeeSelected"),function(t,e){$("#"+e.id).removeClass("employeeSelected"),$("#"+e.id).addClass("employeeSelector")}),$("#"+this.prefixID+"emp"+t).removeClass("employeeSelector"),$("#"+this.prefixID+"emp"+t).addClass("employeeSelected"),null!=this.selectHandler&&this.selectHandler()},nationalEmployeeSelector.prototype.setSelectHandler=function(t){this.selectHandler=t},nationalEmployeeSelector.prototype.setResultHandler=function(t){this.resultHandler=t},nationalEmployeeSelector.prototype.setSelectLink=function(t){this.selectLink=t},nationalEmployeeSelector.prototype.clearSearch=function(){$("#"+this.prefixID+"input").val("")},nationalEmployeeSelector.prototype.forceSearch=function(t){$("#"+this.prefixID+"input").val(t.replace(/<[^>]*>/g,""))},nationalEmployeeSelector.prototype.hideInput=function(){$("#"+this.prefixID+"border").css("display","none")},nationalEmployeeSelector.prototype.showInput=function(){$("#"+this.prefixID+"border").css("display","block")},nationalEmployeeSelector.prototype.hideResults=function(){$("#"+this.prefixID+"result").css("display","none")},nationalEmployeeSelector.prototype.showResults=function(){$("#"+this.prefixID+"result").css("display","inline")},nationalEmployeeSelector.prototype.getSelectorFunction=function(t){var e=this;return function(){e.select(t)}},nationalEmployeeSelector.prototype.enableNoLimit=function(){this.optionNoLimit=1},nationalEmployeeSelector.prototype.setDomain=function(t){$("#"+this.prefixID+"domain").val(t)},nationalEmployeeSelector.prototype.search=function(){if(null==$("#"+this.prefixID+"input").val()||null==$("#"+this.prefixID+"input"))return clearInterval(this.intervalID),!1;if(this.timer+=5e3<this.timer?0:200,300<this.timer){var h=$("#"+this.prefixID+"input").val().replace(/<[^>]*>/g,""),t=$("#"+this.prefixID+"domain").val().replace(/<[^>]*>/g,"");if(""==h||null==h||h==this.q&&t==this.qDomain)""==h&&(this.q=h,$("#"+this.prefixID+"result").html(""),this.numResults=0,this.selection="",null!=this.resultHandler&&this.resultHandler()),this.showNotBusy();else{this.q=h,this.qDomain=t,null!=this.currRequest&&this.currRequest.abort();var e="national/employee/search";"#"==this.q.substr(0,1)&&(e="employee/search");var i={url:this.apiPath+e,dataType:"json",data:{q:this.q,noLimit:this.optionNoLimit,domain:t},success:function(t){u.currRequest=null,u.numResults=0,u.selection="",$("#"+u.prefixID+"result").html("");var e="";for(var i in e="micro"==u.outputStyle?'<table class="employeeSelectorTable"><thead><tr><th>Name</th><th>Contact</th></tr></thead><tbody id="'+u.prefixID+'result_table"></tbody></table>':'<table class="employeeSelectorTable"><thead><tr><th>Name</th><th>Location</th><th>Contact</th></tr></thead><tbody id="'+u.prefixID+'result_table"></tbody></table>',$("#"+u.prefixID+"result").html(e),0==t.length&&$("#"+u.prefixID+"result_table").append('<tr id="'+u.prefixID+'emp0"><td style="font-size: 120%; background-color: white; text-align: center" colspan=3>No results for &quot;<span style="color: red">'+h+"</span>&quot;</td></tr>"),u.selectionData=new Object,t){u.selectionData[t[i].empUID]=t[i];var o=null!=t[i].data[1]&&""!=t[i].data[1].data?'<img class="employeeSelectorPhoto" src="'+u.rootPath+"image.php?categoryID=1&amp;UID="+t[i].empUID+'&amp;indicatorID=1" alt="photo" />':"",s=null!=t[i].positionData?t[i].positionData.positionTitle:"";s=""==s&&void 0!==t[i].data[23]?t[i].data[23].data:s;var r="";if(null!=t[i].serviceData&&null!=t[i].serviceData[0].groupTitle){var n=0,l="";for(var a in t[i].serviceData)0<n&&(l=" - "),r+=l+(null==t[i].serviceData[a].groupAbbreviation?t[i].serviceData[a].groupTitle:t[i].serviceData[a].groupAbbreviation)+"<br />",n++}room="",null!=t[i].data[8]&&""!=t[i].data[8].data&&(room=t[i].data[8].data);var c="";c=u.emailHref?null!=t[i].data[6]?'<b>Email:</b> <a href="mailto:'+t[i].data[6].data+'" onclick="event.stopPropagation();">'+t[i].data[6].data+"</a><br />":"":null!=t[i].data[6]?"<b>Email:</b> "+t[i].data[6].data+"<br />":"",phone=null!=t[i].data[5]?"<b>Phone:</b> "+t[i].data[5].data+"<br />":"",midName=""==t[i].middleName?"":"&nbsp;"+t[i].middleName+".",linkText=t[i].lastName+", "+t[i].firstName+midName,null!=u.selectLink&&(linkText='<a href="'+u.selectLink+"&empUID="+t[i].empUID+'">'+linkText+"</a>"),"micro"==u.outputStyle?$("#"+u.prefixID+"result_table").append('<tr id="'+u.prefixID+"emp"+t[i].empUID+'">\t\t\t                \t\t\t<td class="employeeSelectorName" title="'+t[i].empUID+" - "+t[i].userName+'">'+o+linkText+'<br /><span class="employeeSelectorTitle">'+s+'</span></td>\t\t\t                \t\t\t<td class="employeeSelectorContact">'+c+phone+"</td>\t\t\t                \t\t\t</tr>"):$("#"+u.prefixID+"result_table").append('<tr id="'+u.prefixID+"emp"+t[i].empUID+'">\t\t\t                \t\t\t<td class="employeeSelectorName" title="'+t[i].empUID+" - "+t[i].userName+'">'+o+linkText+'<br /><span class="employeeSelectorTitle">'+s+'</span></td>\t\t                    \t\t\t<td class="employeeSelectorService">'+r+"<span>"+room+'</span></td>\t\t                    \t\t\t<td class="employeeSelectorContact">'+c+phone+"</td>\t\t\t                \t\t\t</tr>"),$("#"+u.prefixID+"emp"+t[i].empUID).addClass("employeeSelector"),$("#"+u.prefixID+"emp"+t[i].empUID).on("click",u.getSelectorFunction(t[i].empUID)),u.numResults++}if(1==u.numResults&&(u.selection=t[i].empUID),5<=u.numResults){var p=3;"micro"==u.outputStyle&&(p=2),$("#"+u.prefixID+"result_table").append('<tr id="'+u.prefixID+'tip">\t\t                \t\t\t<td class="employeeSelectorName" colspan="'+p+'" style="background-color: white; text-align: center; font-weight: normal">&#x1f4a1; Can&apos;t find someone? Trying searching their Email address</td>\t\t                \t\t\t</tr>')}null!=u.resultHandler&&u.resultHandler(),u.showNotBusy()},cache:!1},u=this;1==this.useJSONP&&(i.url+="&format=jsonp",i.dataType="jsonp"),this.currRequest=$.ajax(i)}}},orgchartForm.prototype.initialize=function(){$("#"+this.containerID).html('<div id="'+this.prefixID+'xhrDialog" style="visibility: hidden">\t\t\t\t<form id="'+this.prefixID+'record" enctype="multipart/form-data" action="javascript:void(0);">\t\t\t\t    <div>\t\t\t\t        <button id="'+this.prefixID+'button_cancelchange" class="buttonNorm" style="position: absolute; left: 10px"><img src="../libs/dynicons/?img=process-stop.svg&amp;w=16" alt="cancel" /> Cancel</button>\t\t\t\t        <button id="'+this.prefixID+'button_save" class="buttonNorm" style="position: absolute; right: 10px"><img src="../libs/dynicons/?img=media-floppy.svg&amp;w=16" alt="save" /> Save Change</button>\t\t\t\t        <div style="border-bottom: 2px solid black; line-height: 30px"><br /></div>\t\t\t\t        <div id="'+this.prefixID+'loadIndicator" style="visibility: hidden; position: absolute; text-align: center; font-size: 24px; font-weight: bold; background: white; padding: 16px; height: 300px; width: 460px">Loading... <img src="images/largespinner.gif" alt="loading..." /></div>\t\t\t\t        <div id="'+this.prefixID+'xhr" style="width: 500px; height: 400px; overflow: auto"></div>\t\t\t\t    </div>\t\t\t\t</form>\t\t\t\t</div>'),this.dialog=new dialogController(this.prefixID+"xhrDialog",this.prefixID+"xhr",this.prefixID+"loadIndicator",this.prefixID+"button_save",this.prefixID+"button_cancelchange")},orgchartForm.prototype.getForm=function(i,o,s){this.currUID=i,this.dialog.clearDialog();var r=this.dialog,n=this;switch(o){case 1:$.ajax({url:"ajaxEmployee.php?a=getindicator&empUID="+i+"&indicatorID="+s,success:function(t){r.setContent(t),$("input:visible:first, select:visible:first").focus(),$("input:visible:first, select:visible:first").keypress(function(t){13==t.which&&$("#"+r.btnSaveID).trigger("click")})},error:function(t,e,i){r.setContent("Error: "+i)},cache:!1}),this.dialog.setSaveHandler(function(){$.ajax({type:"POST",url:"./api/?a=employee/"+i,data:$("#"+n.prefixID+"record").serialize(),success:function(t,e){r.hide(),n.updateFormDisplay(i,o,s)},cache:!1})}),this.dialog.show();break;case 2:$.ajax({url:"ajaxPosition.php?a=getindicator&pID="+i+"&indicatorID="+s,success:function(t){r.setContent(t),$("input:visible:first, select:visible:first").focus(),$("input:visible:first, select:visible:first").keypress(function(t){13==t.which&&$("#"+r.btnSaveID).trigger("click")})},error:function(t,e,i){r.setContent("Error: "+i)},cache:!1}),this.dialog.setSaveHandler(function(){$.ajax({type:"POST",url:"./api/?a=position/"+i,data:$("#"+n.prefixID+"record").serialize(),success:function(t){r.hide(),n.updateFormDisplay(i,o,s)},cache:!1})}),this.dialog.show();break;case 3:$.ajax({url:"ajaxGroup.php?a=getindicator&groupID="+i+"&indicatorID="+s,success:function(t){r.setContent(t),$("input:visible:first, select:visible:first").focus(),$("input:visible:first, select:visible:first").keypress(function(t){13==t.which&&$("#"+r.btnSaveID).trigger("click")})},error:function(t,e,i){r.setContent("Error: "+i)},cache:!1}),this.dialog.setSaveHandler(function(){$.ajax({type:"POST",url:"./api/?a=group/"+i,data:$("#"+n.prefixID+"record").serialize(),success:function(t,e){r.hide(),n.updateFormDisplay(i,o,s)},cache:!1})}),this.dialog.show();break;default:alert("default")}},orgchartForm.prototype.updateFormDisplay=function(e,i,o){var s=this;switch(i){case 1:$.ajax({url:"ajaxEmployee.php?a=getFormContent&indicatorID="+o+"&empUID="+e,success:function(t){$("#xhrIndicator_"+o+"_"+i+"_"+e).empty(),$("#xhrIndicator_"+o+"_"+i+"_"+e).html(t),$("#xhrIndicator_"+o+"_"+i+"_"+e).fadeOut(250).fadeIn(250),s.handleUpdateEvents(t,o)},cache:!1});break;case 2:$.ajax({url:"ajaxPosition.php?a=getFormContent&indicatorID="+o+"&pID="+e,success:function(t){$("#xhrIndicator_"+o+"_"+i+"_"+e).empty(),$("#xhrIndicator_"+o+"_"+i+"_"+e).html(t),$("#xhrIndicator_"+o+"_"+i+"_"+e).fadeOut(250).fadeIn(250),s.handleUpdateEvents(t,o)},cache:!1});break;case 3:$.ajax({url:"ajaxGroup.php?a=getFormContent&indicatorID="+o+"&groupID="+e,success:function(t){$("#xhrIndicator_"+o+"_"+i+"_"+e).empty(),$("#xhrIndicator_"+o+"_"+i+"_"+e).html(t),$("#xhrIndicator_"+o+"_"+i+"_"+e).fadeOut(250).fadeIn(250),s.handleUpdateEvents(t,o)},cache:!1});break;default:alert("Unhandled categoryID")}},orgchartForm.prototype.addUpdateEvent=function(t,e){this.updateEvents[t]=e},orgchartForm.prototype.handleUpdateEvents=function(t,e){this.updateEvents[e]&&this.updateEvents[e](t)},dialogController.prototype.clearDialog=function(){$("#"+this.contentID).empty(),$("#"+this.containerID).dialog("option","title","Org. Chart Editor"),$("#"+this.btnSaveID).off()},dialogController.prototype.setTitle=function(t){$("#"+this.containerID).dialog("option","title",t)},dialogController.prototype.hide=function(){$("#"+this.containerID).dialog("close"),this.clearDialog()},dialogController.prototype.show=function(){""==$("#"+this.contentID).html()&&$("#"+this.indicatorID).css("visibility","visible"),$("#"+this.containerID).dialog("open"),$("#"+this.containerID).css("visibility","visible"),$("input:visible:first, select:visible:first").focus()},dialogController.prototype.setContent=function(t){this.clearValidators(),$("#"+this.contentID).empty().html(t),$("#"+this.indicatorID).css("visibility","hidden")},dialogController.prototype.indicateBusy=function(){$("#"+this.indicatorID).css("visibility","visible")},dialogController.prototype.indicateIdle=function(t){$("#"+this.indicatorID).css("visibility","hidden")},dialogController.prototype.enableLiveValidation=function(){var t=this;$('input[type="text"]').on("keyup",function(){t.isValid()})},dialogController.prototype.isValid=function(){for(var t in this.invalid=0,this.validators)this.validators[t]()?null!=this.validatorOks[t]&&this.validatorOks[t]():(this.invalid=1,null!=this.validatorErrors[t]?this.validatorErrors[t]():alert("Data entry error. Please check your input."));return 1==this.invalid?0:1},dialogController.prototype.setSaveHandler=function(t){$("#"+this.btnSaveID).off();var e=this;this.dialogControllerXhrEvent=$("#"+this.btnSaveID).on("click",function(){1==e.isValid()&&t()})},dialogController.prototype.setCancelHandler=function(t){$("#"+this.containerID).off(),$("#"+this.containerID).on("dialogclose",function(){t()})},dialogController.prototype.setJqueryButtons=function(t){$("#"+this.containerID).dialog("option","buttons",t)},dialogController.prototype.clickSave=function(){$("#"+this.btnSaveID).click()},dialogController.prototype.setValidator=function(t,e){this.validators[t]=e},dialogController.prototype.clearValidators=function(){this.validators=new Object,this.validatorErrors=new Object},dialogController.prototype.setValidatorError=function(t,e){this.validatorErrors[t]=e},dialogController.prototype.setValidatorOk=function(t,e){this.validatorOks[t]=e},groupSelector.prototype.initialize=function(){var e=this;$("#"+this.containerID).html('<div id="'+this.prefixID+'border" class="groupSelectorBorder">\t\t\t<div style="float: left"><img id="'+this.prefixID+'icon" src="'+this.basePath+'../libs/dynicons/?img=search.svg&w=16" class="groupSelectorIcon" alt="search" />\t\t\t<img id="'+this.prefixID+'iconBusy" src="'+this.basePath+'images/indicator.gif" style="display: none" class="groupSelectorIcon" alt="search" /></div>\t\t\t<input id="'+this.prefixID+'input" type="search" class="groupSelectorInput" aria-label="search"></input></div>\t\t\t<div id="'+this.prefixID+'result"></div>'),$(this.inputID).on("keydown",function(t){e.showBusy(),e.timer=0,""==$(e.inputID).val()&&(e.q=""),13==t.keyCode&&(e.q="",e.search())}),this.showNotBusy(),this.intervalID=setInterval(function(){e.search()},200)},groupSelector.prototype.showNotBusy=function(){1==this.isBusy&&($("#"+this.prefixID+"icon").css("display","inline"),$("#"+this.prefixID+"iconBusy").css("display","none"),this.isBusy=0)},groupSelector.prototype.showBusy=function(){$("#"+this.prefixID+"icon").css("display","none"),$("#"+this.prefixID+"iconBusy").css("display","inline"),this.isBusy=1},groupSelector.prototype.select=function(t){for(var e in this.selection=t,nodes=$("#"+this.containerID+" .groupSelected"),nodes)null!=nodes[e].id&&($("#"+nodes[e].id).removeClass("groupSelected"),$("#"+nodes[e].id).addClass("groupSelector"));$("#"+this.prefixID+"grp"+t).addClass("groupSelected"),$("#"+this.prefixID+"grp"+t).removeClass("groupSelector"),null!=this.selectHandler&&this.selectHandler()},groupSelector.prototype.searchTag=function(t){this.tag=t},groupSelector.prototype.setSelectHandler=function(t){this.selectHandler=t},groupSelector.prototype.setResultHandler=function(t){this.resultHandler=t},groupSelector.prototype.setSelectLink=function(t){this.selectLink=t},groupSelector.prototype.clearSearch=function(){$("#"+this.prefixID+"input").val("")},groupSelector.prototype.forceSearch=function(t){$("#"+this.prefixID+"input").val(t.replace(/<[^>]*>/g,""))},groupSelector.prototype.hideInput=function(){$("#"+this.prefixID+"border").css("display","none")},groupSelector.prototype.hideResults=function(){$("#"+this.prefixID+"result").css("display","none")},groupSelector.prototype.showResults=function(){$("#"+this.prefixID+"result").css("display","inline")},groupSelector.prototype.enableNoLimit=function(){this.optionNoLimit=1},groupSelector.prototype.configInputID=function(t){this.inputID=t},groupSelector.prototype.search=function(){if(null==$("#"+this.prefixID+"input").val()||null==$("#"+this.prefixID+"input"))return clearInterval(this.intervalID),!1;if(this.timer+=5e3<this.timer?0:200,300<this.timer){var t=0,i=$("#"+this.prefixID+"input").val().replace(/<[^>]*>/g,"");if(null==i)return clearInterval(this.intervalID),!1;if(0!=this.q.length&&this.q.length<i.length&&0==this.numResults&&(t=1),""!=i&&i!=this.q&&0==t){this.q=i,null!=this.currRequest&&this.currRequest.abort();var o=this;this.currRequest=$.ajax({url:this.apiPath+"group/search",dataType:"json",data:{q:this.q,tag:this.tag,noLimit:this.optionNoLimit},success:function(t){o.currRequest=null,o.selection="",o.numResults=0,o.jsonResponse=t,$("#"+o.prefixID+"result").html("");var e='<table class="groupSelectorTable"><tr><th>Group Title</th></tr><tbody id="'+o.prefixID+'result_table"></tbody></table>';$("#"+o.prefixID+"result").html(e+$("#"+o.prefixID+"result").html()),0==t.length&&$("#"+o.prefixID+"result_table").append('<tr id="'+o.prefixID+'emp0"><td style="font-size: 120%; background-color: white; text-align: center">No results for &quot;<span style="color: red">'+i+"</span>&quot;</td></tr>"),o.selectionData=new Object,$.each(t,function(t,e){o.selectionData[e.groupID]=e,linkText=e.groupTitle,null!=o.selectLink&&(linkText='<a href="'+o.selectLink+"&groupID="+e.groupID+'">'+linkText+"</a>"),$("#"+o.prefixID+"result_table").append('<tr id="'+o.prefixID+"grp"+e.groupID+'"><td class="groupSelectorTitle" title="'+e.groupID+'">'+linkText+"</td></tr>"),$("#"+o.prefixID+"grp"+e.groupID).addClass("groupSelector"),$("#"+o.prefixID+"grp"+e.groupID).on("click",function(){o.select(e.groupID)}),o.numResults++}),1==o.numResults&&(o.selection=t[0].groupID),null!=o.resultHandler&&o.resultHandler(),o.showNotBusy()},cache:!1})}else""==i&&(this.q=i,$("#"+this.prefixID+"result").html(""),this.numResults=0,this.selection="",null!=this.resultHandler&&this.resultHandler()),this.showNotBusy()}},positionSelector.prototype.initialize=function(){var e=this;$("#"+this.containerID).html('<div id="'+this.prefixID+'border" class="positionSelectorBorder">\t\t\t<div style="float: left"><img id="'+this.prefixID+'icon" src="'+e.rootPath+'../libs/dynicons/?img=search.svg&w=16" class="positionSelectorIcon" alt="search" />\t\t\t<img id="'+this.prefixID+'iconBusy" src="'+e.rootPath+'images/indicator.gif" style="display: none" class="positionSelectorIcon" alt="search" /></div>\t\t\t<input id="'+this.prefixID+'input" type="search" class="positionSelectorInput" aria-label="Search"></input></div>\t\t\t<div id="'+this.prefixID+'result"></div>'),$("#"+this.prefixID+"input").on("keydown",function(t){e.showBusy(),e.timer=0,13==t.keyCode&&e.search()}),this.showNotBusy(),this.intervalID=setInterval(function(){e.search()},200)},positionSelector.prototype.showNotBusy=function(){1==this.isBusy&&($("#"+this.prefixID+"icon").css("display","inline"),$("#"+this.prefixID+"iconBusy").css("display","none"),this.isBusy=0)},positionSelector.prototype.showBusy=function(){$("#"+this.prefixID+"icon").css("display","none"),$("#"+this.prefixID+"iconBusy").css("display","inline"),this.isBusy=1},positionSelector.prototype.select=function(t){this.selection=t,$.each($("#"+this.containerID+" .positionSelected"),function(t,e){$("#"+e.id).removeClass("positionSelected"),$("#"+e.id).addClass("positionSelector")}),$("#"+this.prefixID+"pos"+t).removeClass("positionSelector"),$("#"+this.prefixID+"pos"+t).addClass("positionSelected"),null!=this.selectHandler&&this.selectHandler()},positionSelector.prototype.setSelectHandler=function(t){this.selectHandler=t},positionSelector.prototype.setResultHandler=function(t){this.resultHandler=t},positionSelector.prototype.setSelectLink=function(t){this.selectLink=t},positionSelector.prototype.forceSearch=function(t){$("#"+this.prefixID+"input").val(t.replace(/<[^>]*>/g,""))},positionSelector.prototype.hideInput=function(){$("#"+this.prefixID+"border").css("display","none")},positionSelector.prototype.showInput=function(){$("#"+this.prefixID+"border").css("display","block")},positionSelector.prototype.hideResults=function(){$("#"+this.prefixID+"result").css("display","none")},positionSelector.prototype.showResults=function(){$("#"+this.prefixID+"result").css("display","inline")},positionSelector.prototype.enableEmployeeSearch=function(){this.optionEmployeeSearch=1},positionSelector.prototype.enableNoLimit=function(){this.optionNoLimit=1},positionSelector.prototype.search=function(){if(null==$("#"+this.prefixID+"input").val()||null==$("#"+this.prefixID+"input"))return clearInterval(this.intervalID),!1;if(this.timer+=5e3<this.timer?0:200,300<this.timer){var o=$("#"+this.prefixID+"input").val().replace(/<[^>]*>/g,"");if(""!=o&&o!=this.q){this.q=o,null!=this.currRequest&&this.currRequest.abort();var l=this;this.currRequest=$.ajax({url:this.apiPath+"position/search",dataType:"json",data:{q:this.q,employeeSearch:this.optionEmployeeSearch,noLimit:this.optionNoLimit},success:function(t,e){l.currRequest=null,l.selection="",l.numResults=0,$("#"+l.prefixID+"result").html("");var i='<table class="positionSelectorTable"><tr><th>Title</th><th>Incumbent(s)</th></tr><tbody id="'+l.prefixID+'result_table"></tbody></table>';return $("#"+l.prefixID+"result").html(i),0==t.length&&$("#"+l.prefixID+"result_table").append('<tr id="'+l.prefixID+'emp0"><td style="font-size: 120%; background-color: white; text-align: center" colspan=2>No results for &quot;<span style="color: red">'+o+"</span>&quot;</td></tr>"),l.selectionData=new Object,$.each(t,function(t,e){if(l.selectionData[e.positionID]=e,service="",null!=e.services){var i=0,o="";for(var s in e.services)0<i&&(o=" - "),null!=e.services[s].groupAbbreviation?service+=o+e.services[s].groupAbbreviation:service+=o+e.services[s].groupTitle,i++}if(employees="",null!=e.employeeList[0]){for(var r in e.employeeList)null!=e.employeeList[r].firstName&&(employees+=e.employeeList[r].firstName+" "+e.employeeList[r].lastName+", ");employees=employees.replace(/, $/,"")}var n="";""!=e.positionData[2].data&&(n=' <span style="font-weight: normal">('+e.positionData[2].data+" "+e.positionData[14].data+")</span>"),linkText=e.positionTitle+n,null!=l.selectLink&&(linkText='<a href="'+l.selectLink+"&positionID="+e.positionID+'">'+linkText+"</a>"),$("#"+l.prefixID+"result_table").append('<tr id="'+l.prefixID+"pos"+e.positionID+'">\t                \t\t\t<td class="positionSelectorTitle" title="PositionID: '+e.positionID+'">'+linkText+'<br /><span class="positionSelectorService">'+service+'</span></td>                    \t\t\t<td class="positionSelectorIncumbents">'+employees+"</td></tr>"),$("#"+l.prefixID+"pos"+e.positionID).addClass("positionSelector"),$("#"+l.prefixID+"pos"+e.positionID).on("click",function(){l.select(e.positionID)}),l.numResults++}),1==l.numResults&&(l.selection=t[0].positionID),null!=l.resultHandler&&l.resultHandler(),l.showNotBusy(),t},preventCache:!0})}else""==o&&(this.q=o,$("#"+this.prefixID+"result").html(""),this.numResults=0,this.selection="",null!=this.resultHandler&&this.resultHandler()),this.showNotBusy()}};