function dialogController(t,i,o,e,s){this.containerID=t,this.contentID=i,this.indicatorID=o,this.btnSaveID=e,this.btnCancelID=s,this.dialogControllerXhrEvent=null,this.prefixID="dialog"+Math.floor(1e3*Math.random())+"_",this.validators=new Object,this.validatorErrors=new Object,this.validatorOks=new Object,this.invalid=0,$("#"+this.containerID).dialog({autoOpen:!1,modal:!0,height:"auto",width:"auto"}),this.clearDialog();var n=this;$("#"+this.btnCancelID).on("click",function(){n.hide()})}function position(t){this.positionID=t,this.rootID=0,this.parentID=0,this.parentContainerID,this.containerHeader,this.prefixID="pos"+Math.floor(1e3*Math.random())+"_",this.data=new Object}function positionSelector(t){this.apiPath="./api/?a=",this.rootPath="",this.selection="",this.containerID=t,this.prefixID="posSel"+Math.floor(1e3*Math.random())+"_",this.timer=0,this.q="",this.isBusy=1,this.backgroundImage="images/indicator.gif",this.intervalID=null,this.selectHandler=null,this.resultHandler=null,this.selectLink=null,this.selectionData=new Object,this.optionEmployeeSearch=0,this.optionNoLimit=0,this.currRequest=null,this.numResults=0}dialogController.prototype.clearDialog=function(){$("#"+this.contentID).empty(),$("#"+this.containerID).dialog("option","title","Org. Chart Editor"),$("#"+this.btnSaveID).off()},dialogController.prototype.setTitle=function(t){$("#"+this.containerID).dialog("option","title",t)},dialogController.prototype.hide=function(){$("#"+this.containerID).dialog("close"),this.clearDialog()},dialogController.prototype.show=function(){""==$("#"+this.contentID).html()&&$("#"+this.indicatorID).css("visibility","visible"),$("#"+this.containerID).dialog("open"),$("#"+this.containerID).css("visibility","visible"),$("input:visible:first, select:visible:first").focus()},dialogController.prototype.setContent=function(t){this.clearValidators(),$("#"+this.contentID).empty().html(t),$("#"+this.indicatorID).css("visibility","hidden")},dialogController.prototype.indicateBusy=function(){$("#"+this.indicatorID).css("visibility","visible")},dialogController.prototype.indicateIdle=function(t){$("#"+this.indicatorID).css("visibility","hidden")},dialogController.prototype.enableLiveValidation=function(){var t=this;$('input[type="text"]').on("keyup",function(){t.isValid()})},dialogController.prototype.isValid=function(){for(var t in this.invalid=0,this.validators)this.validators[t]()?null!=this.validatorOks[t]&&this.validatorOks[t]():(this.invalid=1,null!=this.validatorErrors[t]?this.validatorErrors[t]():alert("Data entry error. Please check your input."));return 1==this.invalid?0:1},dialogController.prototype.setSaveHandler=function(t){$("#"+this.btnSaveID).off();var i=this;this.dialogControllerXhrEvent=$("#"+this.btnSaveID).on("click",function(){1==i.isValid()&&t()})},dialogController.prototype.setCancelHandler=function(t){$("#"+this.containerID).off(),$("#"+this.containerID).on("dialogclose",function(){t()})},dialogController.prototype.setJqueryButtons=function(t){$("#"+this.containerID).dialog("option","buttons",t)},dialogController.prototype.clickSave=function(){$("#"+this.btnSaveID).click()},dialogController.prototype.setValidator=function(t,i){this.validators[t]=i},dialogController.prototype.clearValidators=function(){this.validators=new Object,this.validatorErrors=new Object},dialogController.prototype.setValidatorError=function(t,i){this.validatorErrors[t]=i},dialogController.prototype.setValidatorOk=function(t,i){this.validatorOks[t]=i},position.prototype.initialize=function(t){var i=this;this.parentContainerID=t;var o=this.prefixID+this.positionID;this.containerHeader=o+"_title";var e;e='<div id="'+o+'" class="positionSmall">\t\t\t\t<div id="'+o+'_numFTE" class="fteCounter"></div>\t\t\t\t<div id="'+o+'_title" class="positionSmall_title"></div>\t\t\t\t<div id="'+o+'_container" class="positionSmall_data">\t\t\t\t\t<div id="'+o+'_content"></div>\t\t\t\t\t<div id="'+o+'_controls" style="visibility: hidden; display: none"><div class="button" onclick="window.location=\'?a=view_position&amp;positionID='+this.positionID+'\';"><img src="../libs/dynicons/?img=accessories-text-editor.svg&amp;w=32" alt="Edit" title="Edit" /> View Details</div> \t\t\t\t\t<div class="button" onclick="addSubordinate('+this.positionID+')"><img src="../libs/dynicons/?img=list-add.svg&amp;w=32" alt="Add Icon" title="Add Icon" /> Add Subordinate</div></div>\t\t\t\t</div>\t\t\t  </div>',$("#"+t).append(e),$("#"+o+"_container").on("mouseenter",function(){$("#"+o+"_controls").css({visibility:"visible",display:"inline"}),$("#"+o).css("zIndex","900")}),$("#"+o+"_container").on("mouseleave",function(){i.unsetFocus()}),$("#"+this.containerHeader).on("mouseenter",function(){$("#"+this.containerHeader).addClass("positionSmall_title_drag")}),$("#"+this.containerHeader).on("mouseleave",function(){$("#"+this.containerHeader).removeClass("positionSmall_title_drag")})},position.prototype.onLoad=function(){},position.prototype.onDrawComplete=function(){},position.prototype.prepContent=function(t){this.data=t,this.setNumFTE(t[11].data),this.setTitle(t.title);var i=""!=t[9].data?"PD#"+t[9].data:"";if(this.setContent(t[2].data+" "+t[13].data+"-"+t[14].data+"<br />"+i),""!=t[15].data){var o=$.parseJSON(t[15].data);$("#"+this.prefixID+this.positionID).css("position","absolute");var e=120,s=40;null!=o[this.rootID]?(0<o[this.rootID].y&&(e=o[this.rootID].y),0<o[this.rootID].x&&(s=o[this.rootID].x)):null!=o[this.parentID]&&(0<o[this.parentID].y&&(e=o[this.parentID].y),0<o[this.parentID].x&&(s=o[this.parentID].x)),this.setDomPosition(s,e)}},position.prototype.draw=function(t){var i=this;null==t?$.ajax({url:"./api/?a=position/"+this.positionID,data:{q:this.q},dataType:"json",success:function(t){i.prepContent(t),i.onLoad(),i.onDrawComplete()},cache:!1}):(i.data=t,response=t,i.prepContent(response),i.onLoad(),i.onDrawComplete())},position.prototype.getDomID=function(){return this.prefixID+this.positionID},position.prototype.setDomPosition=function(t,i){$("#"+this.prefixID+this.positionID).css({position:"absolute",top:i+"px",left:t+"px"})},position.prototype.getPositionID=function(){return this.positionID},position.prototype.setNumFTE=function(t){$("#"+this.prefixID+this.positionID+"_numFTE").html(t)},position.prototype.setTitle=function(t){""==t&&(t=""),$("#"+this.prefixID+this.positionID+"_title").html(t)},position.prototype.setContent=function(t){$("#"+this.prefixID+this.positionID+"_content").html(t)},position.prototype.setRootID=function(t){this.rootID=t},position.prototype.setParentID=function(t){this.parentID=t},position.prototype.unsetFocus=function(){$("#"+this.prefixID+this.positionID+"_controls").css("visibility","hidden"),$("#"+this.prefixID+this.positionID+"_controls").css("display","none"),$("#"+this.prefixID+this.positionID).css("zIndex","20")},position.prototype.emptyControls=function(){$("#"+this.prefixID+this.positionID+"_controls").empty()},position.prototype.addControl=function(t){$("#"+this.prefixID+this.positionID+"_controls").append(t)},positionSelector.prototype.initialize=function(){var i=this;$("#"+this.containerID).html('<div id="'+this.prefixID+'border" class="positionSelectorBorder">\t\t\t<div style="float: left"><img id="'+this.prefixID+'icon" src="'+i.rootPath+'../libs/dynicons/?img=search.svg&w=16" class="positionSelectorIcon" alt="search" />\t\t\t<img id="'+this.prefixID+'iconBusy" src="'+i.rootPath+'images/indicator.gif" style="display: none" class="positionSelectorIcon" alt="search" /></div>\t\t\t<input id="'+this.prefixID+'input" type="search" class="positionSelectorInput" aria-label="Search"></input></div>\t\t\t<div id="'+this.prefixID+'result"></div>'),$("#"+this.prefixID+"input").on("keydown",function(t){i.showBusy(),i.timer=0,13==t.keyCode&&i.search()}),this.showNotBusy(),this.intervalID=setInterval(function(){i.search()},200)},positionSelector.prototype.showNotBusy=function(){1==this.isBusy&&($("#"+this.prefixID+"icon").css("display","inline"),$("#"+this.prefixID+"iconBusy").css("display","none"),this.isBusy=0)},positionSelector.prototype.showBusy=function(){$("#"+this.prefixID+"icon").css("display","none"),$("#"+this.prefixID+"iconBusy").css("display","inline"),this.isBusy=1},positionSelector.prototype.select=function(t){this.selection=t,$.each($("#"+this.containerID+" .positionSelected"),function(t,i){$("#"+i.id).removeClass("positionSelected"),$("#"+i.id).addClass("positionSelector")}),$("#"+this.prefixID+"pos"+t).removeClass("positionSelector"),$("#"+this.prefixID+"pos"+t).addClass("positionSelected"),null!=this.selectHandler&&this.selectHandler()},positionSelector.prototype.setSelectHandler=function(t){this.selectHandler=t},positionSelector.prototype.setResultHandler=function(t){this.resultHandler=t},positionSelector.prototype.setSelectLink=function(t){this.selectLink=t},positionSelector.prototype.forceSearch=function(t){$("#"+this.prefixID+"input").val(t.replace(/<[^>]*>/g,""))},positionSelector.prototype.hideInput=function(){$("#"+this.prefixID+"border").css("display","none")},positionSelector.prototype.showInput=function(){$("#"+this.prefixID+"border").css("display","block")},positionSelector.prototype.hideResults=function(){$("#"+this.prefixID+"result").css("display","none")},positionSelector.prototype.showResults=function(){$("#"+this.prefixID+"result").css("display","inline")},positionSelector.prototype.enableEmployeeSearch=function(){this.optionEmployeeSearch=1},positionSelector.prototype.enableNoLimit=function(){this.optionNoLimit=1},positionSelector.prototype.search=function(){if(null==$("#"+this.prefixID+"input").val()||null==$("#"+this.prefixID+"input"))return clearInterval(this.intervalID),!1;if(this.timer+=5e3<this.timer?0:200,300<this.timer){var e=$("#"+this.prefixID+"input").val().replace(/<[^>]*>/g,"");if(""!=e&&e!=this.q){this.q=e,null!=this.currRequest&&this.currRequest.abort();var l=this;this.currRequest=$.ajax({url:this.apiPath+"position/search",dataType:"json",data:{q:this.q,employeeSearch:this.optionEmployeeSearch,noLimit:this.optionNoLimit},success:function(t,i){l.currRequest=null,l.selection="",l.numResults=0,$("#"+l.prefixID+"result").html("");var o='<table class="positionSelectorTable"><tr><th>Title</th><th>Incumbent(s)</th></tr><tbody id="'+l.prefixID+'result_table"></tbody></table>';return $("#"+l.prefixID+"result").html(o),0==t.length&&$("#"+l.prefixID+"result_table").append('<tr id="'+l.prefixID+'emp0"><td style="font-size: 120%; background-color: white; text-align: center" colspan=2>No results for &quot;<span style="color: red">'+e+"</span>&quot;</td></tr>"),l.selectionData=new Object,$.each(t,function(t,i){if(l.selectionData[i.positionID]=i,service="",null!=i.services){var o=0,e="";for(var s in i.services)0<o&&(e=" - "),null!=i.services[s].groupAbbreviation?service+=e+i.services[s].groupAbbreviation:service+=e+i.services[s].groupTitle,o++}if(employees="",null!=i.employeeList[0]){for(var n in i.employeeList)null!=i.employeeList[n].firstName&&(employees+=i.employeeList[n].firstName+" "+i.employeeList[n].lastName+", ");employees=employees.replace(/, $/,"")}var r="";""!=i.positionData[2].data&&(r=' <span style="font-weight: normal">('+i.positionData[2].data+" "+i.positionData[14].data+")</span>"),linkText=i.positionTitle+r,null!=l.selectLink&&(linkText='<a href="'+l.selectLink+"&positionID="+i.positionID+'">'+linkText+"</a>"),$("#"+l.prefixID+"result_table").append('<tr id="'+l.prefixID+"pos"+i.positionID+'">\t                \t\t\t<td class="positionSelectorTitle" title="PositionID: '+i.positionID+'">'+linkText+'<br /><span class="positionSelectorService">'+service+'</span></td>                    \t\t\t<td class="positionSelectorIncumbents">'+employees+"</td></tr>"),$("#"+l.prefixID+"pos"+i.positionID).addClass("positionSelector"),$("#"+l.prefixID+"pos"+i.positionID).on("click",function(){l.select(i.positionID)}),l.numResults++}),1==l.numResults&&(l.selection=t[0].positionID),null!=l.resultHandler&&l.resultHandler(),l.showNotBusy(),t},preventCache:!0})}else""==e&&(this.q=e,$("#"+this.prefixID+"result").html(""),this.numResults=0,this.selection="",null!=this.resultHandler&&this.resultHandler()),this.showNotBusy()}};